
define double sigma 
let sigma 0.2                                                    !rms level
define double up 
let up 23                                                        !the highest value
set unit v
greg\pen /weight 1.75
set font duplex
set character 0.5
set plot histogram 


lut color
!LET LUT%HUE[I] = 16*INT((256-2*I)|16)
LET LUT%HUE[I] = 256*(1-(I/LUT%SIZE))                            !colourmap, e.g. LUT%BLUE/LUT%RED
lut lut


greg1\set plot landscape
set viewport 0.05 0.3 0.42 0.75
greg\set coord user
greg\set character 0.5
greg\pen /def

	 greg\column x 2 y 3 z 4 /file serpens_hcn10_int.txt     !colourmap file
    greg2\rgdata x y z /blank '3*sigma'   !blanking below 3sigma
    greg\limits /rgdata /reverse x
    greg\level sigma to up by sigma

    greg\plot /scaling lin '3*sigma' up /blanking '3*sigma' 0

    greg\pen /weight 2.75                                        !contours thickness
 	 greg\column x 2 y 3 z 4 /file serpens_hcn10_int.txt     !contours file
    greg2\rgdata x y z /blank sigma
    greg\limits /rgdata /reverse x 
    greg\level '30*sigma' to up by '10*sigma'                    !contours levels

    greg\pen /colour 7                                           !contours colour [in range: 0-7]
    greg\rgmap /abs

!axes
    greg\set character 0.3
    greg\pen /weight 0.75                                        !axes thickness
    greg\pen /colour 0
    greg\box n o i

    greg\set character 0.3
    greg\pen /colour 0
    greg\box p o i

    wedge top /scaling lin sigma up                              !show colourbar

    greg1\column /close

    greg\set character 1   !SMM8                                 !set merker and text
    greg\pen /colour 0 /weight 3
    greg1\set marker 3 3 .2 0
    set coord user
    greg1\draw marker 184.5 -11.3
    greg\pen /colour 0 /weight 1
    set font duplex
    set character 0.250
    greg1\draw text 184.5 -1.3 "SMM8" 


!outflows                                                        !draw line
    greg\pen /def
    greg\pen /colour 6 /weight 1    
    greg\draw relocate 102.75 -153.06 /user                      !line edge
    greg\draw line 106.5 -123.3 /user /clip                      !line the second edge
    greg\pen /def


greg\pen /colour 0 /weight 1                                     !set title and labels
greg\set character 0.4
greg\label "\GD\Gd (Arcsec) " /y
greg\label "\GD\Ga (Arcsec) " /x
    greg\set character 0.4
	greg\draw text 80 240 "Integrated intensity [K km/s]"
    greg\set character 0.3
	greg\draw text 160 120 "HCN J=1-0"


sys "rm -f serpens_hcn10.eps"                                    !output file
hardcopy "serpens_hcn10.eps"
